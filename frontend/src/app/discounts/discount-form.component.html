<div class="discount-form-container">
	<div class="form-header">
		<h1>{{ isEditMode ? 'Edit Discount' : 'Create New Discount' }}</h1>
		<button class="back-btn" (click)="goBack()">
			<span class="material-icons">arrow_back</span>
		</button>
	</div>

	<div class="form-card">
		<form [formGroup]="discountForm" (ngSubmit)="onSubmit()">
			<div class="form-section">
				<h2>Discount Details</h2>

				<div class="form-group">
					<label for="title">Discount Name *</label>
					<input
						type="text"
						id="title"
						formControlName="title"
						placeholder="e.g., New Year Sale"
						class="form-input"
					/>
					<span class="error-message" *ngIf="isFieldInvalid('title')">
						{{ getErrorMessage('title') }}
					</span>
				</div>

				<div class="form-row">
					<div class="form-group">
						<label for="type">Discount Type *</label>
						<select formControlName="type" class="form-input">
							<option *ngFor="let opt of typeOptions" [value]="opt.value">
								{{ opt.label }}
							</option>
						</select>
						<span class="error-message" *ngIf="isFieldInvalid('type')">
							{{ getErrorMessage('type') }}
						</span>
					</div>

					<div class="form-group">
						<label for="value">Discount Value *</label>
						<div class="value-input-group">
							<input
								type="number"
								id="value"
								formControlName="value"
								placeholder="0.00"
								step="0.01"
								min="0"
								class="form-input"
							/>
							<span class="value-suffix">
								{{ discountForm.get('type')?.value === 'percentage' ? '%' : 'â‚¹' }}
							</span>
						</div>
						<span class="error-message" *ngIf="isFieldInvalid('value')">
							{{ getErrorMessage('value') }}
						</span>
					</div>
				</div>

				<div class="form-group checkbox-group">
					<label>
						<input
							type="checkbox"
							formControlName="is_active"
							class="form-checkbox"
						/>
						<span>Active</span>
					</label>
					<small>This discount is currently {{ discountForm.get('is_active')?.value ? 'active' : 'inactive' }}</small>
				</div>
			</div>

			<div class="form-actions">
				<button type="button" class="cancel-btn" (click)="goBack()">
					Cancel
				</button>
				<button type="submit" class="submit-btn" [disabled]="!discountForm.valid || isSubmitting">
					<span *ngIf="!isSubmitting">
						{{ isEditMode ? 'Update Discount' : 'Create Discount' }}
					</span>
					<span *ngIf="isSubmitting" class="spinner">
						<span class="material-icons">autorenew</span>
						Saving...
					</span>
				</button>
			</div>
		</form>
	</div>
</div>

<div class="success-toast" *ngIf="showSuccessMessage">
	{{ successMessage }}
</div>
